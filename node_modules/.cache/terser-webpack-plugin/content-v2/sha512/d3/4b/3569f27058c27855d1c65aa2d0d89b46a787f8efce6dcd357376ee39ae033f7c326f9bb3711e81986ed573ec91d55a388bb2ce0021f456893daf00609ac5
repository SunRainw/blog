{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{505:function(s,t,a){\"use strict\";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"h2\",{attrs:{id:\"dll\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#dll\"}},[s._v(\"#\")]),s._v(\" DLL\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"认识-dll-库\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#认识-dll-库\"}},[s._v(\"#\")]),s._v(\" 认识 DLL 库\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"DLL 全称是动态链接库(Dynamic Link Library)，是为了软件在 Windows 中实现共享函数库的一种实现方式\")]),s._v(\" \"),t(\"li\",[s._v(\"webpack 中也有内置 DLL 的功能，它指的是我们可以将可以共享，并且不经常改变的代码，抽取成一个共享的库\")]),s._v(\" \"),t(\"li\",[s._v(\"这个库在之后编译的过程中，会被引入到其它的项目的代码中\")])]),s._v(\" \"),t(\"p\",[s._v(\"DLL 库的使用分为两步：\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"第一步：打包一个 DLL 库\")]),s._v(\" \"),t(\"li\",[s._v(\"第二步：项目中引入 DLL 库\")])]),s._v(\" \"),t(\"blockquote\",[t(\"p\",[s._v(\"注意：在升级到 webpack4 之后，React 和 Vue 脚手架都移除了 DLL 库，尤大认为 webpack4 已经能够提供很好的性能，不需要去专门维护一个 DLL 库了\")])]),s._v(\" \"),t(\"h3\",{attrs:{id:\"打包一个-dll-库\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#打包一个-dll-库\"}},[s._v(\"#\")]),s._v(\" 打包一个 DLL 库\")]),s._v(\" \"),t(\"p\",[s._v(\"创建一个新的项目，例如：我们打包一个带有\"),t(\"code\",[s._v(\"react\")]),s._v(\"和\"),t(\"code\",[s._v(\"react-dom\")]),s._v(\"的 DLL\")]),s._v(\" \"),t(\"p\",[s._v(\"webpack 帮助我们内置了一个 DllPlugin 可以帮助我们打包一个 DLL 的库文件\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"const\")]),s._v(\" path \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"require\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"path\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"const\")]),s._v(\" webpack \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"require\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"webpack\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\nmodule\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"entry\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"react\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"react\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"react-dom\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"output\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"path\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" path\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"resolve\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"__dirname\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./dll\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"filename\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dll_[name].js\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"library\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dll_[name]\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"plugins\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"webpack\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"DllPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"name\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dll_[name]\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"path\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" path\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"resolve\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"__dirname\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./dll/[name].manifest.json\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 需要生成一个manifest文件，用来对应查找dll\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\")])]),t(\"p\",[s._v(\"yarn build 以后就会生成一个 dll 文件夹，我们将打包后的 dll 文件运用到其他项目\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"使用打包的-dll-库\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#使用打包的-dll-库\"}},[s._v(\"#\")]),s._v(\" 使用打包的 DLL 库\")]),s._v(\" \"),t(\"p\",[s._v(\"如果我们在代码中使用到了 react 和 react-dom，我们有配置 splitChunks 的情况下，他们会进行分包，打包到一个独立的 chunk 中，但是我们有了 dll_react，就不再需要单独打包它们，可以直接取引用 dll_react\")]),s._v(\" \"),t(\"p\",[s._v(\"具体步骤如下：\")]),s._v(\" \"),t(\"ol\",[t(\"li\",[s._v(\"通过 DllReferencePlugin 插件告知要使用的 DLL 库\")]),s._v(\" \"),t(\"li\",[s._v(\"通过 AddAssetHtmlPlugin 插件，将我们打包的 DLL 库引入到 Html 模块中\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[s._v(\"module\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"plugins\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"webpack\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"DllReferencePlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"context\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"resolveApp\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 告知在哪里查找dll\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"manifest\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"resolveApp\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./dll/react.manifest.json\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 告知manifest的位置\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"AddAssetHtmlWebpackPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 该插件自动在html中注入dll_react引用，并在build中添加dll_react.js文件\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"outputPath\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./auto\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"filepath\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"resolveApp\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./dll/dll_react.js\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"terser\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#terser\"}},[s._v(\"#\")]),s._v(\" Terser\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"terser-介绍和安装\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#terser-介绍和安装\"}},[s._v(\"#\")]),s._v(\" Terser 介绍和安装\")]),s._v(\" \"),t(\"h4\",{attrs:{id:\"介绍\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#介绍\"}},[s._v(\"#\")]),s._v(\" 介绍\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"code\",[s._v(\"Terser\")]),s._v(\"是一个 JavaScript 的解释(Parser)、Mangler(绞肉机)/Compressor(压缩机)的工具集\")]),s._v(\" \"),t(\"li\",[s._v(\"早期我们会使用\"),t(\"code\",[s._v(\"uglify-js\")]),s._v(\"来压缩、丑化我们的 JS 代码，但是目前已经不再维护，并且不支持 ES6+的语法\")]),s._v(\" \"),t(\"li\",[t(\"code\",[s._v(\"Terser\")]),s._v(\"是从\"),t(\"code\",[s._v(\"uglify-es\")]),s._v(\"fork 过来的，并且保留它原来的大部分 API 以及适配\"),t(\"code\",[s._v(\"uglify-es\")]),s._v(\"和\"),t(\"code\",[s._v(\"uglify-js@3\")]),s._v(\"等\")]),s._v(\" \"),t(\"li\",[s._v(\"也就是说，\"),t(\"code\",[s._v(\"Terser\")]),s._v(\"可以帮助我们压缩、丑化我们的代码，让我们的 bundle 变得更小\")])]),s._v(\" \"),t(\"h4\",{attrs:{id:\"安装\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装\"}},[s._v(\"#\")]),s._v(\" 安装\")]),s._v(\" \"),t(\"p\",[s._v(\"因为\"),t(\"code\",[s._v(\"Terser\")]),s._v(\"是一个独立的工具，所以它可以单独安装\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 全局安装\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"yarn\")]),s._v(\" global \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" terser\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# npm install terser -g\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 局部安装\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"yarn\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" terser\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# npm install terser\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"命令行使用-terser\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#命令行使用-terser\"}},[s._v(\"#\")]),s._v(\" 命令行使用 Terser\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"terser \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"input files\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"options\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 举例\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# terser 输入文件 -o 输出文件名 -c(compress，后面可以配置参数，如：arrows=true,arguments=true) -m(mangle，同-c)\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 不传则使用默认配置，如果不配-c -m则只会压缩空格和回车\")]),s._v(\"\\nterser js/file1.js \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-o\")]),s._v(\" foo.min.js \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-c\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-m\")]),s._v(\"\\nterser js/file1.js \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-o\")]),s._v(\" foo.min.js \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-c\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"arrows\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true,arguments\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-m\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"keep_classnames\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\")])]),t(\"p\",[s._v(\"关于 Terser 的详细配置可以查看文档\"),t(\"a\",{attrs:{href:\"https://github.com/terser/terser#compress-options\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"compress option\"),t(\"OutboundLink\")],1),s._v(\"和\"),t(\"a\",{attrs:{href:\"https://github.com/terser/terser#mangle-options\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"mangle option\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"h3\",{attrs:{id:\"compress-和-mangle-的部分-options\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#compress-和-mangle-的部分-options\"}},[s._v(\"#\")]),s._v(\" Compress 和 Mangle 的部分 options\")]),s._v(\" \"),t(\"h4\",{attrs:{id:\"compress-option\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#compress-option\"}},[s._v(\"#\")]),s._v(\" Compress option\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"arrows：class 或者 object 中的函数，转换成箭头函数\")]),s._v(\" \"),t(\"li\",[s._v(\"arguments：将函数中使用 arguments[index]装成对应的形参名称\")]),s._v(\" \"),t(\"li\",[s._v(\"dead_code：移除不可达的代码（tree shaking）\")]),s._v(\" \"),t(\"li\",[s._v(\"其他属性可以查看文档\")])]),s._v(\" \"),t(\"h4\",{attrs:{id:\"mangle-option\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#mangle-option\"}},[s._v(\"#\")]),s._v(\" Mangle option\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"toplevel：默认值是 false，顶层作用域中的变量名称，进行丑化(转换)\")]),s._v(\" \"),t(\"li\",[s._v(\"keep_classnames：默认值是 false，是否保持依赖的类名称\")]),s._v(\" \"),t(\"li\",[s._v(\"keep_fnames：默认值是 false，是否保持原来的函数名称\")]),s._v(\" \"),t(\"li\",[s._v(\"其他属性可以查看文档\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"npx terser ./src/abc.js \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-o\")]),s._v(\" abc.min.js \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-c\")]),s._v(\" arrows,arguments\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true,dead_code \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-m\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"toplevel\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true,keep_classnames\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true,keep_fnames\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"true\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"terser-在-webpack-中配置\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#terser-在-webpack-中配置\"}},[s._v(\"#\")]),s._v(\" Terser 在 webpack 中配置\")]),s._v(\" \"),t(\"p\",[s._v(\"真实开发中，我们不需要手动的通过 terser 来处理我们的代码，我们可以直接通过 webpack 处理\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"在 webpack 中有一个 minimizer 属性，在 production 模式下，默认就是使用\"),t(\"code\",[s._v(\"TerserPlugin\")]),s._v(\"来处理我们的代码(当然还有其他的工具)\")]),s._v(\" \"),t(\"li\",[s._v(\"如果我们对默认的配置不满意，也可以自己来创建 TerserPlugin 的实例，并且覆盖相关的配置\")])]),s._v(\" \"),t(\"p\",[s._v(\"具体操作如下\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"首先，我们需要打开 minimize，让其对我们的代码进行压缩（默认 production 模式下已经打开了）\")]),s._v(\" \"),t(\"li\",[s._v(\"其次，我们可以在 minimizer 创建一个 TerserPlugin：\\n\"),t(\"ul\",[t(\"li\",[s._v(\"extractComments：默认值为 true，表示会将注释抽取到一个单独的文件中\\n\"),t(\"ul\",[t(\"li\",[s._v(\"在开发中，我们不希望保留这个注释时，可以设置为 false\")])])]),s._v(\" \"),t(\"li\",[s._v(\"parallel：使用多进程并发运行提高构建速度，默认值是 true，并发运行的默认数量：os.cpus().length - 1（就是，cpus 的线程数-1）\\n\"),t(\"ul\",[t(\"li\",[s._v(\"我们也可以设置自己的格式，但是使用默认值即可\")])])]),s._v(\" \"),t(\"li\",[s._v(\"terserOptions：设置我们的 terser 相关的配置\\n\"),t(\"ul\",[t(\"li\",[s._v(\"compress：设置压缩相关的选项\")]),s._v(\" \"),t(\"li\",[s._v(\"mangle：设置丑化相关的详细，可以直接设置为 true\")]),s._v(\" \"),t(\"li\",[s._v(\"toplevel：底层变量是否进行转换\")]),s._v(\" \"),t(\"li\",[s._v(\"keep_classnames：保留类的名称\")]),s._v(\" \"),t(\"li\",[s._v(\"keep_fnames:保留函数的名称\")]),s._v(\" \"),t(\"li\",[s._v(\"其他相关参数可以查看上面的文档\")])])])])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"const\")]),s._v(\" TerserPlugin \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"require\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"terser-webpack-plugin\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\nmodule\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// ...\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"optimization\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minimize\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minimizer\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TerserPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"parallel\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"extractComments\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"terserOptions\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"compress\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"arguments\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"dead_code\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"mangle\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"toplevel\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"keep_classnames\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"keep_fnames\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"css-的压缩\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#css-的压缩\"}},[s._v(\"#\")]),s._v(\" CSS 的压缩\")]),s._v(\" \"),t(\"p\",[s._v(\"另一个代码的压缩是 css\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"css 压缩通常是去除无用的空格等，因为很难去修改选择器、属性的名称、值等\")]),s._v(\" \"),t(\"li\",[s._v(\"css 的压缩我们可以使用另外一个插件：\"),t(\"code\",[s._v(\"css-minimizer-webpack-plugin\")])]),s._v(\" \"),t(\"li\",[t(\"code\",[s._v(\"css-minimizer-webpack-plugin\")]),s._v(\"是使用 cssnano 工具来优化、压缩 CSS(也可以单独使用)\")])]),s._v(\" \"),t(\"p\",[s._v(\"安装\"),t(\"code\",[s._v(\"css-minimizer-webpack-plugin\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"yarn\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" css-minimizer-webpack-plugin \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-D\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# npm install css-minimizer-webpack-plugin -D\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"p\",[s._v(\"在 optimization.minimizer 中配置\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[s._v(\"module\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"optimization\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minimizer\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"TerserPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"CssMinimizerPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"parallel\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"scope-hoisting\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#scope-hoisting\"}},[s._v(\"#\")]),s._v(\" Scope Hoisting\")]),s._v(\" \"),t(\"p\",[s._v(\"Scope Hoisting 从 webpack3 开始增加的一个新功能，功能是对作用域进行提升，并且让 webpack 打包后的代码更小、运行更快\")]),s._v(\" \"),t(\"p\",[s._v(\"默认情况下 webpack 打包会有很多的函数作用域，包括一些（比如最外层的）IIFE\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"无论是从最开始的代码运行，还是加载一个模块，都需要执行一系列的函数\")]),s._v(\" \"),t(\"li\",[s._v(\"Scope Hoisting 可以将函数合并到一个模块中来运行\")])]),s._v(\" \"),t(\"p\",[s._v(\"使用 Scope Hoisting 非常的简单，webpack 已经内置了对应的模块\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"在 production 模式下，默认这个模块就会启用\")]),s._v(\" \"),t(\"li\",[s._v(\"在 development 模式下，我们需要自己来打开该模块\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[s._v(\"module\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"plugins\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"webpack\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"optimize\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"ModuleConcatenationPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"tree-shaking\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#tree-shaking\"}},[s._v(\"#\")]),s._v(\" Tree Shaking\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"认识-tree-shaking\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#认识-tree-shaking\"}},[s._v(\"#\")]),s._v(\" 认识 Tree Shaking\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"Tree Shaking 是一个术语，在计算机中表示消除死代码(dead_code)\")]),s._v(\" \"),t(\"li\",[s._v(\"最早的想法起源于 LISP，用于消除未调用的代码（纯函数无副作用，可以放心的消除，这也是为什么要求我们再进行函数式编程时，尽量使用纯函数的原因之一）\")]),s._v(\" \"),t(\"li\",[s._v(\"后来 Tree Shaking 也被应用于其他的语言，比如 JavaScript\")])]),s._v(\" \"),t(\"p\",[s._v(\"javaScript 的 Tree Shaking\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"对 JavaScript 进行 Tree Shanking 是源自打包工具 rollup\")]),s._v(\" \"),t(\"li\",[s._v(\"这是因为 Tree shaking 依赖于 ES Module 的静态语法分析（不执行任何的代码，可以明确知道模块的依赖关系）\")]),s._v(\" \"),t(\"li\",[s._v(\"webpack2 正式内置支持了 ES2015 模块，和检测未使用模块的能力\")]),s._v(\" \"),t(\"li\",[s._v(\"在 webpack4 正式扩展了这个能力，并且通过 package.json 的\"),t(\"code\",[s._v(\"sideEffects\")]),s._v(\"属性作为标记，告知 webpack 在编译时，哪里文件可以安全的删除掉\")]),s._v(\" \"),t(\"li\",[s._v(\"webpack5 中，也提供了对部分 CommonJS 的 tree shaking 的支持，\"),t(\"a\",{attrs:{href:\"https://github.com/webpack/changelog-v5#commonjs-tree-shaking\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"点击查看\"),t(\"OutboundLink\")],1)])]),s._v(\" \"),t(\"h3\",{attrs:{id:\"webpack-实现-tree-shaking\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#webpack-实现-tree-shaking\"}},[s._v(\"#\")]),s._v(\" webpack 实现 Tree Shaking\")]),s._v(\" \"),t(\"p\",[s._v(\"事实上 webpack 实现 Tree Shaking 采用了两种\"),t(\"font\",{attrs:{color:\"red\"}},[s._v(\"不同\")]),s._v(\"的方案\")],1),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"usedExports：通过标记某些函数是否被使用，之后通过 Terser 来进行优化的\")]),s._v(\" \"),t(\"li\",[s._v(\"sideEffects：跳过整个模块/文件，直接查看该文件是否有副作用\")])]),s._v(\" \"),t(\"h4\",{attrs:{id:\"usedexports\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#usedexports\"}},[s._v(\"#\")]),s._v(\" usedExports\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"将 mode 设置为 development 模式：\\n\"),t(\"ul\",[t(\"li\",[s._v(\"为了可以看到 usedExports 带来的效果，我们暂时将环境设置为 development 模式\")]),s._v(\" \"),t(\"li\",[s._v(\"因为在 production 模式下，webpack 默认的一些优化会带来很大的影响\")])])]),s._v(\" \"),t(\"li\",[s._v(\"设置\"),t(\"code\",[s._v(\"usedExports\")]),s._v(\"为 true 和 false 对比打包后的代码\\n\"),t(\"ul\",[t(\"li\",[s._v(\"在 usedExports 设置为 true 时，会有一段注释：\"),t(\"code\",[s._v(\"unused harmony export mul\")])]),s._v(\" \"),t(\"li\",[s._v(\"这段注释会告知 Terser，让其在优化时，可以删除掉这段代码\")]),s._v(\" \"),t(\"li\",[s._v(\"我们会发现，在 minimize 设置为 true 时\\n\"),t(\"ul\",[t(\"li\",[s._v(\"sedExports 设置为 false 时，没有用到的函数没有被移除掉\")]),s._v(\" \"),t(\"li\",[s._v(\"而 sedExports 设置为 true 时，没有用到的函数有被移除掉\")])])])])])]),s._v(\" \"),t(\"p\",[s._v(\"所以\"),t(\"code\",[s._v(\"usedExports\")]),s._v(\"实现 Tree shaking 是结合 Terser 来完成的，在 production 模式下，usedExports 是默认为 true 的，不需要我们去设置\")]),s._v(\" \"),t(\"h4\",{attrs:{id:\"sideeffects\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#sideeffects\"}},[s._v(\"#\")]),s._v(\" sideEffects\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"sideEffects 用于告知 webpack compiler 哪些模块是有副作用的\\n\"),t(\"ul\",[t(\"li\",[s._v(\"副作用的意思是这里的代码有执行一些特殊的任务，不能仅仅通过 export 来判断这段代码的意义\")])])]),s._v(\" \"),t(\"li\",[s._v(\"在 package.json 中设置 sideEffects 的值\\n\"),t(\"ul\",[t(\"li\",[s._v(\"如果我们将 sideEffects 设置为 false，就是告知 webpack 可以安全的删除未用到的 exports\\n\"),t(\"ul\",[t(\"li\",[s._v(\"例如我们有一个 format.js、style.css 文件\")]),s._v(\" \"),t(\"li\",[s._v(\"该文件在导入时没有使用任何的变量来接受，那么打包后的文件，不会保留 format.js、style.css 相关的任何代码\")])])]),s._v(\" \"),t(\"li\",[s._v(\"如果有一些我们希望保留，可以设置为数组\")])])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-json line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// package.json\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v('\"sideEffects\"')]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./src/util/format.js\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"*.css\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\")])]),t(\"p\",[s._v(\"一般情况下我们的模块都是没有副作用的，所以我们可以只对 css 文件进行处理\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-json line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// package.json\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v('\"sideEffects\"')]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\")])]),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// webpack.config.js\")]),s._v(\"\\n\\nmodule\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"module\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"rules\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"test\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token regex\"}},[t(\"span\",{pre:!0,attrs:{class:\"token regex-delimiter\"}},[s._v(\"/\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex-source language-regex\"}},[s._v(\"\\\\.css\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex-delimiter\"}},[s._v(\"/\")])]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"use\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"sideEffects\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 设置这个属性就不会删除css文件\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\")])]),t(\"div\",{staticClass:\"custom-block tip\"},[t(\"p\",{staticClass:\"title\"},[s._v(\"建议\")]),t(\"p\",[s._v(\"如何在项目中对 JavaScript 的代码进行 TreeShaking 呢(生成环境)?\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"在 optimization 中配置 usedExports 为 true，来帮助 Terser 进行优化;\")]),s._v(\" \"),t(\"li\",[s._v(\"在 package.json 中配置 sideEffects，直接对模块进行优化;\")])])]),t(\"h3\",{attrs:{id:\"css-实现-tree-shaking\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#css-实现-tree-shaking\"}},[s._v(\"#\")]),s._v(\" CSS 实现 Tree Shaking\")]),s._v(\" \"),t(\"p\",[s._v(\"CSS 的 Tree Shaking 需要借助一些其他的插件\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"早期的时候，我们会使用 PurifyCss 插件来完成 Css 的 Tree Shaking，但是目前改库已经不再维护了（最新更新也是 4 年前了）\")]),s._v(\" \"),t(\"li\",[s._v(\"目前我们可以使用\"),t(\"code\",[s._v(\"PurgeCSS\")]),s._v(\"来完成 Css 的 Tree Shaking，也就是帮助我们删除未使用的 CSS 工具\")])]),s._v(\" \"),t(\"p\",[s._v(\"安装 PurgeCss 的 webpack 插件\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"yarn\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" purgecss-webpack-plugin \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-D\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# npm install purgecss-webpack-plugin -D\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"p\",[s._v(\"配置 PurgeCss，一般在生产环境\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"paths: 表示要检测哪些目录下的内容需要被分析，这里我们可以使用 glob\")]),s._v(\" \"),t(\"li\",[s._v(\"默认情况下，Purgecss 会将我们的 html 标签的样式移除掉，如果我们希望保留，可以添加一个 safelist 的属性\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[s._v(\"module\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// ...\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"plugins\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"PurgecssPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"paths\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" glob\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sync\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token template-string\"}},[t(\"span\",{pre:!0,attrs:{class:\"token template-punctuation string\"}},[s._v(\"`\")]),t(\"span\",{pre:!0,attrs:{class:\"token interpolation\"}},[t(\"span\",{pre:!0,attrs:{class:\"token interpolation-punctuation punctuation\"}},[s._v(\"${\")]),s._v(\"resolveAp\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"p\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"./src\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token interpolation-punctuation punctuation\"}},[s._v(\"}\")])]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"/**/*\")]),t(\"span\",{pre:!0,attrs:{class:\"token template-punctuation string\"}},[s._v(\"`\")])]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"nodir\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token function-variable function\"}},[s._v(\"safelist\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n              \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"standard\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"body\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"html\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\")])]),t(\"ul\",[t(\"li\",[s._v(\"purgecss 也可以对 less 文件进行处理（所以它是对打包后的 css 进行 tree shaking 操作）\")])]),s._v(\" \"),t(\"h2\",{attrs:{id:\"其他\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#其他\"}},[s._v(\"#\")]),s._v(\" 其他\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"http-压缩\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#http-压缩\"}},[s._v(\"#\")]),s._v(\" HTTP 压缩\")]),s._v(\" \"),t(\"p\",[s._v(\"HTTP 压缩是一种内置在服务器和客户端之间的，以改进传输速度和带宽利用率的方式\")]),s._v(\" \"),t(\"p\",[s._v(\"HTTP 压缩的流程是\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"第一步：HTTP 数据在服务器发送钱就已经被压缩了（可以在 webpack 中完成）\")]),s._v(\" \"),t(\"li\",[s._v(\"第二步：兼容的浏览器在向服务器发送请求时，会告知服务器自己支持哪些压缩格式\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"GET /encrypted-area HTTP/1.1\\nHost: www.exaple.com\\nAccpet-Encoding: gip, deflate\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\")])]),t(\"ul\",[t(\"li\",[s._v(\"第三步：服务器在浏览器支持的压缩格式下，直接返回对应的压缩后的文件，并且在响应头中告知浏览器\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"HTTP/1.1 200 OK\\nDate: Tue, 10 Aug 2021 06:03:16 GMT\\nLast-Modified: wed, 08 Jan 2021 23:11:55 GMT\\nAccept-Ranges: bytes\\nContent-Length: 438\\nConnect-Type: text/html; charset=UTF-8\\nContent-Encoding: gzip\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"p\",[s._v(\"目前的压缩合适非常的多\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v('compress：UNIX 的\"compress\"程序的方法（历史性原因，不推荐大多数应用使用，应该使用 gip 或者 deflate）')]),s._v(\" \"),t(\"li\",[s._v(\"deflate：基于 deflate 算法（定义与 RFC 1951）的压缩，使用 zlib 数据格式封装\")]),s._v(\" \"),t(\"li\",[s._v(\"gzip：GUN zip 格式（定义与 RFC 1952），是目前使用比较广泛的压缩算法\")]),s._v(\" \"),t(\"li\",[s._v(\"br：一种新的开源压缩算法，专为 HTTP 内容的编码而设计\")])]),s._v(\" \"),t(\"p\",[s._v(\"Webpack 实现对文件的压缩\")]),s._v(\" \"),t(\"p\",[s._v(\"webpack 中相当于是实现了 HTTP 压缩的第一步操作，我们可以使用 CompressionPlugin\")]),s._v(\" \"),t(\"p\",[s._v(\"第一步，安装 CompressionWebpackPlugin\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"yarn\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" compression-webpack-plugin \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-D\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# npm install compression-webpack-plugin -D\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[s._v(\"使用 CompressionWebpackPlugin 即可\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"CompressionPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"test\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token regex\"}},[t(\"span\",{pre:!0,attrs:{class:\"token regex-delimiter\"}},[s._v(\"/\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex-source language-regex\"}},[s._v(\"\\\\.(css|js)$\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex-delimiter\"}},[s._v(\"/\")])]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 匹配哪些文件需要压缩\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// threshold: 500, // 设置文件从多大开始压缩\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minRatio\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.7\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 至少的压缩比例\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"algorithm\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"gzip\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 采用的压缩算法\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"html-文件中代码的压缩\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#html-文件中代码的压缩\"}},[s._v(\"#\")]),s._v(\" HTML 文件中代码的压缩\")]),s._v(\" \"),t(\"p\",[s._v(\"我们之前使用了 HtmlWebpackPlugin 插件来生成 HTML 的模板，事实上它还有一些其他的配置\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"inject：设置打包的资源插入的位置\\n\"),t(\"ul\",[t(\"li\",[s._v(\"true、false：表示插入或不插入\")]),s._v(\" \"),t(\"li\",[s._v(\"body、head：表示插入到 body 或者 head 中\")])])]),s._v(\" \"),t(\"li\",[s._v(\"cache：设置为 true，只有当文件改变时，才会生成新的文件（默认值是 true）\")]),s._v(\" \"),t(\"li\",[s._v(\"minify：默认会使用一个插件\"),t(\"code\",[s._v(\"html-minifier-terser\")])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"HtmlWebpackPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"inject\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"body\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"cache\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minify\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" isProduction\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"?\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"removeComments\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 移除注释\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"collapseWhitespace\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 折叠空格\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"removeRedundantAttributes\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 移除多余的属性 例如type=text\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"useShortDoctype\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 比如我们的模板是html4，那么会转换成html5的文档\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"removeStyleLinkTypeAttributes\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v('// 比如link中的type=\"text/css\"')]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"keepClosingSlash\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 是否保存单元素的尾部\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minifyCSS\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 是否压缩css\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"minifyJS\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"mangle\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"toplevel\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n          \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"false\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"inlinechunkhtmlplugin\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#inlinechunkhtmlplugin\"}},[s._v(\"#\")]),s._v(\" InlineChunkHtmlPlugin\")]),s._v(\" \"),t(\"p\",[s._v(\"InlineChunkHtmlPlugin 可以辅助将一些 chunk 出来的模块，内联到 html 中，例如：runtime 的代码，代码量不大，但是必须加装的，那么我们可以内联到 html 中\")]),s._v(\" \"),t(\"p\",[s._v(\"这个插件是在`reac-dev-utils1 中实现的，所以我们可以安装它\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"yarn\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" react-dev-utils \"),t(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-D\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# npm install react-dev-utils -D\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"p\",[s._v(\"在生成环境的 plugins 中进行配置\")]),s._v(\" \"),t(\"p\",[s._v(\"在 production 的 plugins 中进行配置\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"const\")]),s._v(\" InlineChunkHtmlPlugin \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"require\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"react-dev-utils/InlineChunkHtmlPlugin\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"const\")]),s._v(\" HtmlWebpackPlugin \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"require\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"html-webpack-plugin\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\nmodule\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// ...\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"plugins\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// ...\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"new\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[s._v(\"InlineChunkHtmlPlugin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"HtmlWebpackPlugin\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex\"}},[t(\"span\",{pre:!0,attrs:{class:\"token regex-delimiter\"}},[s._v(\"/\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex-source language-regex\"}},[s._v(\"runtime.+\\\\.js\")]),t(\"span\",{pre:!0,attrs:{class:\"token regex-delimiter\"}},[s._v(\"/\")])]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\")])])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}