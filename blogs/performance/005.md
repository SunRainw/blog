---
title: Performance
date: 2021-06-11
tags:
 - JS性能
categories:
 - JS性能相关
sidebar: auto
---

## 为什么使用Performance

- GC的目的是为了实现内存空间的良性循环
- 良性循环的基石是合理使用
- 必须时刻关注内存变化才能确定是否合理
- Performance提供多种监控内存的方式，可以通过Performance实时监控内存变化

## Performance使用步骤

- 打开浏览器输入目标网址
- 进入开发人员工具面板，选择性能
- 开启录制功能，访问具体界面
- 执行用户行为，一段时间后停止录制
- 分析界面中记录的内存信息

## 内存问题的体现

### 内存问题的外在表现

(假设网络环境正常)
- 页面出现延迟加载或经常性暂停(可能由于有频繁的垃圾回收，说明代码让内存短时间沾满)
- 页面持续性出现糟糕的性能(可能底层存在内存膨胀，当前界面为了达到一定的运行速度，而申请了更多的内存空间，从而超过了本机的承载)
- 页面的性能随时间延长越来越差(可能存在内存泄漏，也就是代码执行过程中，回收的空间越来越少，越来越多的空间无法回收)

## 常见的内存监控方式

### 界定内存问题的标准

- 内存泄漏：内存使用持续升高
- 内存膨胀：在多数设备上都存在性能问题（可能在多种设备上体现，可能是由于硬件不支持，但如果对多个通用设备上测出相同的问题，就可能是程序本身的问题）
- 频繁垃圾回收：通过内存变化图进行分析

### 监控内存方式

- 浏览器任务管理器
- Timeline时序图记录
- 对快照查找分离DOM(分离DOM也就是一中内存泄漏)
- 判断是否存在频繁的垃圾回收