---
title: 模块化概述
date: 2021-06-29
tags:
 - 模块化开发
categories:
 - 前端工程化
sidebar: auto
---

> 模块化开发 —— 当下最重要的前端开发范式之一

## 背景

随着前端应用的日益复杂，我们的项目代码已经逐渐膨胀到了不得不花大量时间去管理的程度，而模块化就是最主流的代码组织方式。它通过将复杂代码按照功能的不同，去划分不同的模块单独维护的这种方式，去提高开发效率，降低维护成本

**模块化**只是一种思想，一种开发的理论，并不是一个具体的实现方式

## 模块化的演进过程

早期的前端标准，根本没有预料到前端行业会有今天的规模，所以有很多设计上的遗留问题，就导致了实现前端模块化会有一些问题，虽然说现如今这些问题都已经被一些工具或标准解决了，但是解决这些问题的过程我们需要了解。
### Stage 1 - 基于文件划分的方式

最早期的js模块化是**基于文件划分的方式**去实现的，这也是web中最原始的模块系统
*
* 约定一个js文件就是一个模块，然后通过script标签引入到html中，一个script就对应一个模块
* 在代码中直接调用模块中的全局成员，这个成员可能是一个变量也可能是一个函数

这种方式的缺点：
* 所有的模块都在全局范围工作，没有一个独立的私有空间，也就造成了 —— `全局作用域污染`（即模块内部所有的成员都可以在外部任意访问）
* 同时模块过多时容易产生`命名冲突`问题
* 无法管理模块与模块之间的依赖关系

总的来说这种方式完全依赖于约定，项目体量一旦大起来，就很麻烦

### Stage 2 - 命名空间方式

* 约定每一个模块指暴露一个全局的对象，所有的模块成员，都挂载在这个全局对象下
* 这种方式的优点：可以减小命名冲突的可能；缺点：依然没有私有空间，也没有解决依赖关系

### Stage 3 IIFE

使用IIFE(立即执行函数)，为模块提供私有空间

* 具体做法就是将模块中每一个成员，都放在一个函数中，对于需要暴露给外部的成员，可以通过**window.XXX**挂载到全局对象上
* 这种方式的优点
    * 实现了私有成员，私用成员只能通过闭包的形式访问，外部无法访问
    * 还可以利用自执行函数的参数, 作为依赖声明去使用，例如`;(function ($) { })(JQuery)`

上述方案就是早期前端开发者在没有工具和规范的情况下对模块化的落地实现方式，这些方式确实解决了各种各样的问题, 但是仍然存在一些没有解决的问题, 针对这些问题, 下面单独细说。